
<!-- * Copyright 2009 Sjukvardsradgivningen * * This library is free software; 
	you can redistribute it and/or modify * it under the terms of version 2.1 
	of the GNU Lesser General Public * License as published by the Free Software 
	Foundation. * * This library is distributed in the hope that it will be useful, 
	* but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY 
	or FITNESS FOR A PARTICULAR PURPOSE. See the * GNU Lesser General Public 
	License for more details. * * You should have received a copy of the GNU 
	Lesser General Public * License along with this library; if not, write to 
	the * Free Software Foundation, Inc., 59 Temple Place, Suite 330, * Boston, 
	MA 02111-1307 USA -->
<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:spring="http://www.springframework.org/schema/beans"
	xmlns:cxf="http://www.mulesource.org/schema/mule/cxf/2.2" xmlns:https="http://www.mulesource.org/schema/mule/https/2.2"
	xmlns:quartz="http://www.mulesource.org/schema/mule/quartz/2.2"
	xmlns:vm="http://www.mulesource.org/schema/mule/vm/2.2" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
               http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
               http://www.mulesource.org/schema/mule/core/2.2 http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
               http://www.mulesource.org/schema/mule/https/2.2 http://www.mulesource.org/schema/mule/https/2.2/mule-https.xsd
               http://www.mulesource.org/schema/mule/cxf/2.2  http://www.mulesource.org/schema/mule/cxf/2.2/mule-cxf.xsd
               http://www.mulesource.org/schema/mule/quartz/2.2 http://www.mulesource.org/schema/mule/quartz/2.2/mule-quartz.xsd
               http://www.mulesource.org/schema/mule/vm/2.2 http://www.mulesource.org/schema/mule/vm/2.2/mule-vm.xsd
               http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
               http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<spring:beans>
		<spring:import resource="classpath:META-INF/cxf/cxf.xml" />
		<spring:import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
		<spring:import resource="classpath:META-INF/cxf/cxf-extension-http.xml" />

		<jaxws:client id="getAddressesClient"
			serviceClass="se.riv.itintegration.registry.getlogicaladdresseesbyservicecontract.v1.rivtabp21.GetLogicalAddresseesByServiceContractResponderInterface"
			address="${ei.push.address.client}" />

		<jaxws:client id="getUpdatesClient"
			serviceClass="se.riv.itintegration.engagementindex.getupdates.v1.rivtabp21.GetUpdatesResponderInterface"
			address="${ei.push.updates.client}" />

		<jaxws:client id="updateClient"
			serviceClass="se.riv.itintegration.engagementindex.update.v1.rivtabp21.UpdateResponderInterface"
			address="${ei.push.update.client}" />

		<context:component-scan base-package="se.skl.components.pull" />

	</spring:beans>

	<model name="EngagementIndex-GetUpdates-trigger-model">

		<service name="EngagementIndex-GetUpdates-trigger-service">

			<inbound>
				<quartz:inbound-endpoint jobName="getUpdatesJob"
					repeatInterval="10000">
					<quartz:event-generator-job />
				</quartz:inbound-endpoint>
			</inbound>


			<component>
				<spring-object bean="engagementIndexPull"></spring-object>
			</component>

		</service>
		
	</model>

</mule>
