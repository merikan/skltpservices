#summary Engagementindex Pull service

<wiki:toc max_depth="2" />

= Engagemangsindex Pull=

Engagemangsindex är ett index som visar var man kan hitta ytterligare information angående en individ, t.ex. vilken/vilka vårdcentraler denna har bokat tid hos. Detta index skall innehålla aktuell information och måste således uppdateras regelbundet. 

Pull funktionaliteten som beskrivs i detta dokument är endast till för de vårdsystem som inte själva kan uppdatera engagmangsindex. Funktionaliteten användas som en komponent till Mule ESB.

== Konceptuell beskrivning ==

För att pull-komponenten skall fungera korrekt måste tre tjänster vara tillgängliga.

  * *Tjänsteadressering (itintegration:registry) `GetLogicalAddresseesByServiceContract`*. Tjänsten returnerar en lista över logiska adressater som har en tjänsteproducent för angivet tjänstekontrakt (namnrymd)  och som har anropsbehörighet för angiven tjänstekonsument (hsa-id).
  * *Engagemangsindex (itintegration:engagementindex) `GetUpdates`*. Tjänst som Engagemangsindex använder för att hämta uppdateringar från ett källsystem (som alternativ till att källsystemet initierar uppdateringar med hjälp av Update-tjänsten).
  * *Engagemangsindex (itintegration:engagementindex) `Update`*. Tjänst som källsystemet använder för att uppdatera engagemangsindex.

=== Tjänsterna i sitt sammanhang ===

1, Hämta de logiska adresser som skall användas för att adressera tjänsteproducenter där det finns engagemangsinformation. 

http://skltpservices.googlecode.com/svn/site/images/engagementindexPull/GetLogicalAddressees.png

2, Hämta uppdateringar från tjänsteproducenten (källsystemet), ett anrop avser en tjänstedomän. Tjänsteproducenten skall svara med alla patienter vars engagemang förändrats sedan angiven tidpunkt inom tjänstedomänen.

http://skltpservices.googlecode.com/svn/site/images/engagementindexPull/GetUpdates.png

3, Uppdatera engagemangsindex.

http://skltpservices.googlecode.com/svn/site/images/engagementindexPull/Update.png

==Detaljerad beskrivning==

===Komponenter===

[http://www.mulesoft.org/ Mule ESB]
[http://code.google.com/p/skltp/ Tjänsteplattformen]
Engagemangsindex


http://skltpservices.googlecode.com/svn/site/images/engagementindexPull/Components.png

=Installation=

==Vad krävs för att köra Pull-komponenten==

  * [http://www.mulesoft.org/download-mule-esb-community-edition Mule 3.3]
  * [http://activemq.apache.org/ Active MQ xx]
  * En databas, tex [http://www.mysql.com/products/community/ MySQL] eller [http://db.apache.org/derby/ Apache Derby] 

==Ladda ner och installera==
  # Ladda ner senaste distributionen från [http://code.google.com/p/skltpservices/downloads/list nedladdningssidan]
  # Kopiera filen `EIPullIC-<version>.zip` till `<MULE_HOME>/apps`
  # Konfigurera enligt instruktioner nedan
  # Starta Mule

==Konfigurera==

==Bygga från källkod==

  # Checka ut fån svn enligt följande [http://code.google.com/p/skltpservices/source/checkout instruktion] med följande url `http(s)://skltpservices.googlecode.com/svn/Components/EngagementindexPull`
  # Bygg med [http://maven.apache.org/ Maven]
  # Kopiera filen `EIPullIC-<version>.zip` till `<MULE_HOME>/apps`
  # Konfigurera enligt instruktioner ovan
  # Starta Mule